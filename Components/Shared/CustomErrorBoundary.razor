@namespace BlazorApp.Components.Shared
@using Microsoft.AspNetCore.Components.Web

<CascadingValue Value="this">
    <Microsoft.AspNetCore.Components.Web.ErrorBoundary @ref="errorBoundary">
        <ChildContent>
            @ChildContent
        </ChildContent>
        <ErrorContent Context="exception">
            <div class="alert alert-danger">
                <h3>Error</h3>
                <p>Lo sentimos, ha ocurrido un error en la aplicaci√≥n.</p>
                @if (ShowDetails)
                {
                    <p>@exception.Message</p>
                    <p>@exception.StackTrace</p>
                }
                <button class="btn btn-primary" @onclick="RecoverError">Intentar de nuevo</button>
            </div>
        </ErrorContent>
    </Microsoft.AspNetCore.Components.Web.ErrorBoundary>
</CascadingValue>

@code {
    private Microsoft.AspNetCore.Components.Web.ErrorBoundary? errorBoundary;

    [Parameter]
    public RenderFragment? ChildContent { get; set; }

    [Parameter]
    public bool ShowDetails { get; set; }

    public void RecoverError()
    {
        errorBoundary?.Recover();
    }
}